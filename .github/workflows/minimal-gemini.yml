name: Minimal Flow

on:
  issue_comment:
    types: [created]

jobs:
  execute:
    runs-on: ubuntu-latest
    steps:
    - name: Run Gemini
      uses: google-github-actions/run-gemini-cli@v0
      with:
        # 显式声明所有认证参数（即使部分为空）
        gemini_api_key: ${{ secrets.GEMINI_KEY }}
        google_api_key: ''  # 空占位符
        gcp_workload_identity_provider: ''
        gcp_service_account: ''
        use_vertex_ai: false  # 明确关闭Vertex AI
        use_gemini_code_assist: false  # 明确关闭GCA
        # 强制指定settings配置
        settings: |
          {
            "auth": {
              "method": "api_key",
              "api_key": "${{ secrets.GEMINI_KEY }}"
            }
          }
        prompt: |
          Respond to: ${{ github.event.comment.body }}
